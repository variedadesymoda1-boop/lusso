<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LUSSON - Alta Cosmética</title>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <div class="menu-overlay" id="menuOverlay" onclick="toggleMenu(false)">
        <div class="side-menu" onclick="event.stopPropagation()">
            <div style="display: flex; justify-content: space-between; align-items: center;">
                <span style="letter-spacing: 2px; font-weight: 700;">MENÚ</span>
                <i class="fa-solid fa-xmark" onclick="toggleMenu(false)" style="cursor: pointer;"></i>
            </div>
            <ul>
                <li><a href="index.html">Inicio</a></li>
                <li><a href="rubores.html">Rubores</a></li>
                <li><a href="labiales.html">Labiales</a></li>
                <li><a href="polvos.html">Polvos</a></li>
                <li><a href="bases.html">Bases y Correctores</a></li>
                <li><a href="skincare.html">Skincare</a></li>
            </ul>
        </div>
    </div>

    <nav class="navbar">
        <i class="fa-solid fa-bars" onclick="toggleMenu(true)" style="cursor: pointer; font-size: 20px;"></i>
        <a href="index.html" class="logo">LUSSON</a>
        <div class="nav-icons">
            <div style="position: relative; cursor: pointer;" onclick="toggleCart(true)">
                <i class="fa-solid fa-bag-shopping"></i>
                <span id="cart-count" style="position: absolute; top: -8px; right: -8px; background: #c5a059; color: white; font-size: 9px; padding: 2px 5px; border-radius: 50%;">0</span>
            </div>
        </div>
    </nav>

    <div id="grid-productos" class="grid-productos">
        </div>

    <div class="cart-panel" id="cartPanel">
        <div style="display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid #eee; padding-bottom: 15px;">
            <h2 style="font-size: 16px; letter-spacing: 2px;">MI BOLSA</h2>
            <i class="fa-solid fa-xmark" onclick="toggleCart(false)" style="cursor: pointer;"></i>
        </div>
        <div id="cart-items" style="margin-top: 20px; flex-grow: 1; overflow-y: auto;"></div>
        <div style="border-top: 1px solid #eee; padding-top: 15px; margin-top: 20px;">
            <div style="display: flex; justify-content: space-between; font-weight: 700; margin-bottom: 20px;">
                <span>TOTAL</span>
                <span>$<span id="total-price">0</span></span>
            </div>
            <button onclick="enviarPedido()" style="width: 100%; background: #25d366; color: white; border: none; padding: 15px; font-weight: 700; cursor: pointer;">PEDIR POR WHATSAPP</button>
        </div>
    </div>

    <a href="https://wa.me/57TUNUMERO" class="wa-float" target="_blank"><i class="fa-brands fa-whatsapp"></i></a>

    <footer class="footer">
    <p>© 2026 LUSSON COLOMBIA - Alta Cosmética</p>
    <span id="punto-secreto" style="display: inline-block; width: 30px; height: 30px; cursor: default; color: rgba(0,0,0,0.01); text-align: center;">.</span>
    </footer>
    

    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>

    <script>
        // PEGA TUS LLAVES AQUÍ
        const firebaseConfig = {
            apiKey: "AIzaSyCMCFn8zuekM5rIh6Uq02zu_ypblsJonuo",
            authDomain: "lusson-web.firebaseapp.com",
            projectId: "lusson-web",
            storageBucket: "lusson-web.firebasestorage.app",
            messagingSenderId: "445073966036",
            appId: "1:445073966036:web:f6c56d465f68ace86a4c41"
        };
        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();

        let carrito = [];

        function toggleMenu(show) {
            document.getElementById('menuOverlay').classList.toggle('active', show);
        }

        function toggleCart(show) {
            document.getElementById('cartPanel').classList.toggle('active', show);
        }

        db.collection("lusso").onSnapshot((snapshot) => {
            const grid = document.getElementById('grid-productos');
            grid.innerHTML = '';
            snapshot.forEach((doc) => {
                const p = doc.data();
                grid.innerHTML += `
                    <div class="card">
                        <img src="${p.img}" alt="${p.nombre}">
                        <h3>${p.nombre}</h3>
                        <p>$${p.precio}</p>
                        <button class="btn-add" onclick="agregarAlCarrito('${p.nombre}', ${p.precio})">AGREGAR</button>
                    </div>
                `;
            });
        });

        function agregarAlCarrito(nombre, precio) {
            carrito.push({nombre, precio});
            actualizarCarrito();
        }

        function actualizarCarrito() {
            const container = document.getElementById('cart-items');
            const totalE = document.getElementById('total-price');
            const countE = document.getElementById('cart-count');
            container.innerHTML = '';
            let total = 0;
            carrito.forEach((item, index) => {
                total += item.precio;
                container.innerHTML += `<div style="display:flex; justify-content:space-between; margin-bottom:10px; font-size:13px;">
                    <span>${item.nombre}</span>
                    <span>$${item.precio} <i class="fa-solid fa-trash" onclick="eliminar(${index})" style="color:#ff4d4d; margin-left:10px; cursor:pointer;"></i></span>
                </div>`;
            });
            totalE.innerText = total;
            countE.innerText = carrito.length;
        }

        function eliminar(idx) {
            carrito.splice(idx, 1);
            actualizarCarrito();
        }

        function enviarPedido() {
            let texto = "Hola LUSSON, quiero pedir: \n";
            carrito.forEach(i => texto += `- ${i.nombre}: $${i.precio} \n`);
            window.open(`https://wa.me/57TUNUMERO?text=${encodeURIComponent(texto)}`);
        }
                // ... aquí termina tu función enviarPedido() ...
        }

        // --- AQUÍ PEGAS EL CÓDIGO NUEVO ---
        let toques = 0;
        const punto = document.getElementById('punto-secreto');

        punto.addEventListener('click', function() {
            toques++;
            if (toques === 5) {
                window.location.href = "admin/index.html";
                toques = 0; 
            }
        });

        // Reinicia el contador si no tocas en 3 segundos
        setInterval(() => { toques = 0; }, 3000);
        
    </script>
</body>
</html>
