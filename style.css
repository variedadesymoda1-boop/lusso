let cart = [];
let clickCount = 0;

// 1. EL PUNTO SECRETO (Admin)
function modoJefa() {
    clickCount++;
    if (clickCount === 5) {
        let pass = prompt("Acceso exclusivo. Digita tu clave:");
        if (pass === "1234") { // Cambia esto por tu clave real
            window.location.href = "admin.html";
        }
        clickCount = 0;
    }
    setTimeout(() => { clickCount = 0; }, 3000);
}

// 2. ABRIR/CERRAR CARRITO
function toggleCart() {
    document.getElementById('modal-cart').classList.toggle('active');
}

// 3. LOGICA DE COMPRA
function agregar(nombre, precio) {
    cart.push({nombre, precio});
    actualizarCarrito();
    // Abrir carrito automáticamente al agregar
    document.getElementById('modal-cart').classList.add('active');
}

function actualizarCarrito() {
    const lista = document.getElementById('cart-items');
    const totalLabel = document.getElementById('cart-total');
    const countLabel = document.getElementById('cart-count');
    
    lista.innerHTML = '';
    let total = 0;

    cart.forEach((item, index) => {
        total += item.precio;
        lista.innerHTML += `
            <div style="display:flex; justify-content:space-between; padding:10px; border-bottom:1px solid #eee;">
                <span>${item.nombre}</span>
                <span>$${item.precio} <button onclick="eliminar(${index})" style="color:red; border:none; background:none; cursor:pointer;">&times;</button></span>
            </div>
        `;
    });

    totalLabel.innerText = '$' + total;
    countLabel.innerText = cart.length;
    feather.replace();
}

function eliminar(index) {
    cart.splice(index, 1);
    actualizarCarrito();
}

function comprarWhatsApp() {
    if (cart.length === 0) return alert("El carrito está vacío");
    let msg = "¡Hola Lusson! ✨ Quisiera pedir:\n";
    cart.forEach(i => msg += `- ${i.nombre} ($${i.precio})\n`);
    msg += `Total: ${document.getElementById('cart-total').innerText}`;
    window.open(`https://wa.me/TUNUMERO?text=${encodeURIComponent(msg)}`);
}

// Reemplazar iconos al cargar
feather.replace();
    
